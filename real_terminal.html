<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ğŸ¥Š AI ë°°í‹€ - ì‹¤ì œ í„°ë¯¸ë„</title>
    <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
    <style>
        body {
            margin: 0;
            padding: 15px;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1e1e1e;
            color: #ffffff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            text-align: center;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            padding: 12px;
            border-radius: 8px;
        }
        
        .header h1 {
            margin: 0;
            font-size: 20px;
        }
        
        .header p {
            margin: 5px 0 0 0;
            font-size: 14px;
            opacity: 0.9;
        }
        
        .terminals {
            display: flex;
            flex: 1;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .terminal-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .claude-container {
            border-color: #007ACC;
        }
        
        .claude-container.focused {
            border-color: #0099FF;
            box-shadow: 0 0 10px rgba(0, 153, 255, 0.3);
        }
        
        .gemini-container {
            border-color: #FF6B35;
        }
        
        .gemini-container.focused {
            border-color: #FF8855;
            box-shadow: 0 0 10px rgba(255, 136, 85, 0.3);
        }
        
        .status-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            padding: 2px 6px;
            font-size: 10px;
            border-radius: 3px;
            background: rgba(0,0,0,0.7);
            color: white;
            z-index: 10;
        }
        
        .status-thinking {
            background: #FF9800;
            animation: pulse 1.5s infinite;
        }
        
        .status-ready {
            background: #4CAF50;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .terminal-header {
            padding: 8px 12px;
            font-weight: bold;
            color: white;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .claude-header {
            background: #007ACC;
        }
        
        .gemini-header {
            background: #FF6B35;
        }
        
        .terminal {
            flex: 1;
            background: #1e1e1e;
        }
        
        .input-section {
            background: #252526;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #3e3e42;
        }
        
        .input-label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #cccccc;
            font-size: 14px;
        }
        
        .input-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        textarea {
            flex: 1;
            padding: 8px 12px;
            font-size: 14px;
            background: #3c3c3c;
            color: white;
            border: 1px solid #5a5a5a;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            resize: vertical;
            min-height: 60px;
            max-height: 200px;
        }
        
        textarea:focus {
            outline: none;
            border-color: #007ACC;
        }
        
        .chat-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .chat-controls button {
            padding: 4px 8px;
            font-size: 12px;
        }
        
        button {
            padding: 8px 16px;
            background: #0e639c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        
        button:hover {
            background: #1177bb;
        }
        
        button.secondary {
            background: #5a5a5a;
        }
        
        button.secondary:hover {
            background: #6a6a6a;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¥Š AI ë°°í‹€ - VS Code ìŠ¤íƒ€ì¼ í„°ë¯¸ë„</h1>
        <p>ì‹¤ì œ Claudeì™€ Gemini í„°ë¯¸ë„ì´ GUI ì•ˆì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤</p>
    </div>
    
    <div class="terminals">
        <div class="terminal-container claude-container" id="claude-container">
            <div class="status-indicator status-ready" id="claude-status">ì¤€ë¹„</div>
            <div class="terminal-header claude-header">
                <span>ğŸ¤–</span>
                <span>Claude Code Terminal</span>
            </div>
            <div id="claude-terminal" class="terminal"></div>
        </div>
        
        <div class="terminal-container gemini-container" id="gemini-container">
            <div class="status-indicator status-ready" id="gemini-status">ì¤€ë¹„</div>
            <div class="terminal-header gemini-header">
                <span>ğŸš€</span>
                <span>Gemini CLI Terminal</span>
            </div>
            <div id="gemini-terminal" class="terminal"></div>
        </div>
    </div>
    
    <div class="input-section">
        <div class="input-label">ğŸ’¬ ë‘ í„°ë¯¸ë„ì— ë™ì‹œ ëª…ë ¹ì–´ ì „ì†¡</div>
        <div class="chat-controls">
            <button class="secondary" onclick="pasteFromClipboard()">ğŸ“‹ ë¶™ì—¬ë„£ê¸°</button>
            <button class="secondary" onclick="clearInput()">ğŸ—‘ï¸ ì…ë ¥ ì§€ìš°ê¸°</button>
            <button class="secondary" onclick="clearBoth()">ğŸ†‘ í„°ë¯¸ë„ ì§€ìš°ê¸°</button>
        </div>
        <div class="input-row">
            <textarea id="commandInput" placeholder="ëª…ë ¹ì–´ë‚˜ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (Ctrl+Enterë¡œ ì „ì†¡)"></textarea>
            <button onclick="sendToBoth()">ğŸ“¤ ì „ì†¡</button>
        </div>
    </div>

    <script src="node_modules/xterm/lib/xterm.js"></script>
    <script src="node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
    <script>
        const { ipcRenderer } = require('electron');
        
        // VS Codeì™€ ê°™ì€ í…Œë§ˆ
        const terminalTheme = {
            background: '#1e1e1e',
            foreground: '#cccccc',
            cursor: '#ffffff',
            selection: '#264f78',
            black: '#000000',
            brightBlack: '#666666',
            red: '#cd3131',
            brightRed: '#f14c4c',
            green: '#0dbc79',
            brightGreen: '#23d18b',
            yellow: '#e5e510',
            brightYellow: '#f5f543',
            blue: '#2472c8',
            brightBlue: '#3b8eea',
            magenta: '#bc3fbc',
            brightMagenta: '#d670d6',
            cyan: '#11a8cd',
            brightCyan: '#29b8db',
            white: '#e5e5e5',
            brightWhite: '#ffffff'
        };
        
        // í„°ë¯¸ë„ ìƒì„± (VS Code ìŠ¤íƒ€ì¼)
        const claudeTerminal = new Terminal({
            theme: terminalTheme,
            fontFamily: '"Monaco", "Menlo", "Ubuntu Mono", monospace',
            fontSize: 13,
            lineHeight: 1.2,
            cursorBlink: true,
            scrollback: 1000
        });
        
        const geminiTerminal = new Terminal({
            theme: terminalTheme,
            fontFamily: '"Monaco", "Menlo", "Ubuntu Mono", monospace',
            fontSize: 13,
            lineHeight: 1.2,
            cursorBlink: true,
            scrollback: 1000
        });
        
        // Fit addon ì¶”ê°€ (ì°½ í¬ê¸°ì— ë§ì¶¤)
        const claudeFitAddon = new FitAddon.FitAddon();
        const geminiFitAddon = new FitAddon.FitAddon();
        
        claudeTerminal.loadAddon(claudeFitAddon);
        geminiTerminal.loadAddon(geminiFitAddon);
        
        // í„°ë¯¸ë„ì„ DOMì— ì—°ê²°
        claudeTerminal.open(document.getElementById('claude-terminal'));
        geminiTerminal.open(document.getElementById('gemini-terminal'));
        
        // í¬ê¸° ë§ì¶”ê¸°
        setTimeout(() => {
            claudeFitAddon.fit();
            geminiFitAddon.fit();
        }, 100);
        
        // ë°±ì—”ë“œì—ì„œ í„°ë¯¸ë„ ì¶œë ¥ ë°›ê¸°
        ipcRenderer.on('claude-data', (event, data) => {
            claudeTerminal.write(data);
        });
        
        ipcRenderer.on('gemini-data', (event, data) => {
            geminiTerminal.write(data);
        });
        
        // í¬ì»¤ìŠ¤ ìƒíƒœ ê´€ë¦¬
        let currentFocus = null;
        
        // í„°ë¯¸ë„ì—ì„œ í‚¤ë³´ë“œ ì…ë ¥ì„ ë°±ì—”ë“œë¡œ ì „ì†¡
        claudeTerminal.onData((data) => {
            setStatus('claude', 'thinking', 'ì…ë ¥ ì¤‘...');
            ipcRenderer.send('claude-input', data);
        });
        
        geminiTerminal.onData((data) => {
            setStatus('gemini', 'thinking', 'ì…ë ¥ ì¤‘...');
            ipcRenderer.send('gemini-input', data);
        });
        
        // í„°ë¯¸ë„ í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸
        claudeTerminal.onFocus(() => {
            setTerminalFocus('claude');
        });
        
        geminiTerminal.onFocus(() => {
            setTerminalFocus('gemini');
        });
        
        // í„°ë¯¸ë„ í¬ê¸° ë³€ê²½ ì‹œ ë°±ì—”ë“œì— ì•Œë¦¼
        claudeTerminal.onResize((size) => {
            ipcRenderer.send('claude-resize', size);
        });
        
        geminiTerminal.onResize((size) => {
            ipcRenderer.send('gemini-resize', size);
        });
        
        // ìƒíƒœ í‘œì‹œ í•¨ìˆ˜
        function setStatus(terminal, type, message) {
            const statusElement = document.getElementById(`${terminal}-status`);
            statusElement.textContent = message;
            statusElement.className = `status-indicator status-${type}`;
        }
        
        // í„°ë¯¸ë„ í¬ì»¤ìŠ¤ í‘œì‹œ í•¨ìˆ˜
        function setTerminalFocus(terminal) {
            // ëª¨ë“  í¬ì»¤ìŠ¤ ì œê±°
            document.getElementById('claude-container').classList.remove('focused');
            document.getElementById('gemini-container').classList.remove('focused');
            
            // ì„ íƒëœ í„°ë¯¸ë„ì— í¬ì»¤ìŠ¤ ì¶”ê°€
            if (terminal) {
                document.getElementById(`${terminal}-container`).classList.add('focused');
                currentFocus = terminal;
            }
        }
        
        // í´ë¦½ë³´ë“œì—ì„œ ë¶™ì—¬ë„£ê¸°
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                const textarea = document.getElementById('commandInput');
                textarea.value += text;
                textarea.focus();
            } catch (err) {
                alert('í´ë¦½ë³´ë“œ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
            }
        }
        
        // ì…ë ¥ì°½ ì§€ìš°ê¸°
        function clearInput() {
            document.getElementById('commandInput').value = '';
            document.getElementById('commandInput').focus();
        }
        
        // ë‘ í„°ë¯¸ë„ì— ë™ì‹œ ëª…ë ¹ì–´ ì „ì†¡
        function sendToBoth() {
            const command = document.getElementById('commandInput').value.trim();
            if (!command) return;
            
            // ìƒíƒœë¥¼ 'ì „ì†¡ ì¤‘'ìœ¼ë¡œ ë³€ê²½
            setStatus('claude', 'thinking', 'ì²˜ë¦¬ ì¤‘...');
            setStatus('gemini', 'thinking', 'ì²˜ë¦¬ ì¤‘...');
            
            // ëª…ë ¹ì–´ ì „ì†¡
            ipcRenderer.send('send-to-both', command);
            document.getElementById('commandInput').value = '';
            
            // ì¼ì • ì‹œê°„ í›„ ìƒíƒœë¥¼ 'ì¤€ë¹„'ë¡œ ë³€ê²½
            setTimeout(() => {
                setStatus('claude', 'ready', 'ì¤€ë¹„');
                setStatus('gemini', 'ready', 'ì¤€ë¹„');
            }, 3000);
        }
        
        // ë‘ í„°ë¯¸ë„ ì§€ìš°ê¸°
        function clearBoth() {
            claudeTerminal.clear();
            geminiTerminal.clear();
            setStatus('claude', 'ready', 'ì¤€ë¹„');
            setStatus('gemini', 'ready', 'ì¤€ë¹„');
        }
        
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.getElementById('commandInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendToBoth();
            } else if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                sendToBoth();
            }
        });
        
        // í„°ë¯¸ë„ ì»¨í…Œì´ë„ˆ í´ë¦­ ì‹œ í¬ì»¤ìŠ¤
        document.getElementById('claude-container').addEventListener('click', () => {
            claudeTerminal.focus();
            setTerminalFocus('claude');
        });
        
        document.getElementById('gemini-container').addEventListener('click', () => {
            geminiTerminal.focus();
            setTerminalFocus('gemini');
        });
        
        // ì°½ í¬ê¸° ë³€ê²½ ì‹œ í„°ë¯¸ë„ í¬ê¸° ì¡°ì •
        window.addEventListener('resize', () => {
            setTimeout(() => {
                claudeFitAddon.fit();
                geminiFitAddon.fit();
            }, 100);
        });
    </script>
</body>
</html>